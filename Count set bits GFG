class Solution {
  public:
    int countSetBits(int n) {
        // code here
        int count = 0;
        for (long long i = 0; i < 32; i++) { 
            long long div = (1LL << (i + 1)); 
            count += (n + 1) / div * (div / 2); 
            long long rem = (n + 1) % div;
            count += max(0LL, rem - div / 2);   
        }
        return count;
    }
};
